# E009: Telegram 机器人状态感知

## 概述

| 属性 | 值 |
|------|-----|
| Epic ID | E009 |
| 名称 | Telegram 机器人状态感知 |
| 描述 | 实现 Telegram 机器人状态通知，让用户感知机器人正在处理 |
| 状态 | 🆕 新建 |
| 优先级 | P1 |
| 依赖 | E007, E008 |

## 目标

- 机器人处理中显示 "typing" 状态
- 处理完成后发送消息
- 支持长时间处理的进度通知

## Stories

| Story | 名称 | 描述 |
|-------|------|------|
| S037 | typing 状态 | 机器人处理时发送 typing 状态 |
| S038 | 处理完成通知 | 处理完成后发送消息 |
| S039 | 进度提示 | 长时间处理显示进度 |

---

## S037: typing 状态

### 任务

- [ ] 调用 Telegram sendChatAction API
- [ ] 处理开始时触发 typing
- [ ] 处理完成后停止

### 实现

```python
# 开始处理时
await bot.send_chat_action(chat_id, "typing")

# 处理完成后自动停止（下次消息会自动停止）
```

### 验收

- [ ] 机器人处理时显示 typing 状态

---

## S038: 处理完成通知

### 任务

- [ ] 处理完成后发送消息
- [ ] 支持 markdown 格式

### 验收

- [ ] 消息正确发送

---

## S039: 进度提示

### 任务

- [ ] 长时间处理分阶段发送状态
- [ ] 可配置的提示间隔

### 验收

- [ ] 长时间任务有进度反馈
