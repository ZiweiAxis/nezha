# E005: å“ªå’é›†æˆ Claude Agent SDK

## æ¦‚è¿°

| å±æ€§ | å€¼ |
|------|-----|
| Epic ID | E005 |
| åç§° | å“ªå’é›†æˆ Claude Agent SDK |
| æè¿° | è®©å“ªå’èƒ½å¤Ÿè°ƒç”¨ Claude Agent SDK å®ç° AI Agent èƒ½åŠ› |
| çŠ¶æ€ | ğŸ†• æ–°å»º |
| ä¼˜å…ˆçº§ | P0 |
| ä¾èµ–æ–¹ | - |

## èƒŒæ™¯

ç´«å¾®ç³»ç»Ÿéœ€è¦å…·å¤‡ AI Agent èƒ½åŠ›ï¼š
- **å“ªå’** ä½œä¸º Agent æ‰§è¡Œå™¨ï¼Œéœ€è¦èƒ½å¤Ÿè°ƒç”¨ Claude Agent SDK
- Claude Agent SDK æä¾›å®Œæ•´çš„ Agent å¾ªç¯èƒ½åŠ›ï¼ˆæ€è€ƒã€å·¥å…·è°ƒç”¨ã€ç»“æœå¤„ç†ï¼‰
- éœ€è¦ä¸ç°æœ‰å¤ªç™½ SDK é›†æˆï¼Œå®ç°æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶

## ç›®æ ‡

1. å®ç°å“ªå’è°ƒç”¨ Claude Agent SDK
2. æ”¯æŒå·¥å…·ï¼ˆToolsï¼‰æ³¨å†Œå’Œæ‰§è¡Œ
3. å®ç° Agent ä¸å¤©æ¢çš„æ¶ˆæ¯äº’é€š
4. æ”¯æŒæµå¼è¾“å‡ºå’Œè¿›åº¦è·Ÿè¸ª

## Stories

| Story | åç§° | æè¿° |
|-------|------|------|
| S012 | Claude Agent SDK è°ƒç ” | è°ƒç ” Claude Agent SDK åŠŸèƒ½å’Œä½¿ç”¨æ–¹å¼ |
| S013 | Agent æœåŠ¡å°è£… | å°è£… Agent æœåŠ¡ï¼Œæä¾›ç»Ÿä¸€è°ƒç”¨æ¥å£ |
| S014 | å·¥å…·æ³¨å†Œæœºåˆ¶ | å®ç°å·¥å…·æ³¨å†Œæœºåˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰å·¥å…· |
| S015 | æ¶ˆæ¯é€šé“é›†æˆ | å®ç° Agent ä¸å¤©æ¢çš„æ¶ˆæ¯äº’é€š |

---

## éªŒæ”¶æ ‡å‡† (Acceptance Criteria)

- [ ] å“ªå’èƒ½å¤ŸæˆåŠŸè°ƒç”¨ Claude Agent SDK
- [ ] è‡ªå®šä¹‰å·¥å…·èƒ½å¤Ÿæ³¨å†Œå’Œæ‰§è¡Œ
- [ ] Agent è¾“å‡ºèƒ½å¤Ÿé€šè¿‡å¤©æ¢å‘é€
- [ ] æ–‡æ¡£å®Œæ•´

## Definition of Done

- [ ] Claude Agent SDK é›†æˆå®Œæˆ
- [ ] è‡³å°‘ 3 ä¸ªå†…ç½®å·¥å…·å¯ç”¨
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´ï¼ˆREADME + API æ–‡æ¡£ï¼‰

---

## S012: Claude Agent SDK è°ƒç ”

### ä»»åŠ¡

- [ ] è°ƒç ” Claude Agent SDK åŠŸèƒ½
- [ ] åˆ†æé›†æˆæ–¹æ¡ˆ
- [ ] ç¼–å†™æŠ€æœ¯è°ƒç ”æŠ¥å‘Š

### è°ƒç ”è¦ç‚¹

1. Claude Agent SDK çš„æ ¸å¿ƒ API
2. å·¥å…·ï¼ˆToolsï¼‰å®šä¹‰å’Œæ³¨å†Œæ–¹å¼
3. æµå¼è¾“å‡ºçš„å¤„ç†æ–¹å¼
4. é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### è¾“å‡º

- æŠ€æœ¯è°ƒç ”æŠ¥å‘Š
- é›†æˆæ–¹æ¡ˆè®¾è®¡æ–‡æ¡£

---

## S013: Agent æœåŠ¡å°è£…

### ä»»åŠ¡

- [ ] å®ç° Agent æœåŠ¡æ ¸å¿ƒç»“æ„
- [ ] å°è£… Claude Agent SDK è°ƒç”¨
- [ ] å®ç°è¯·æ±‚/å“åº”å¤„ç†

### å®ç°è¦ç‚¹

```go
type AgentService struct {
    client  *taibai.Client
    agent   *claude.Agent
    tools   map[string]Tool
}

type Tool interface {
    Name() string
    Description() string
    Execute(ctx context.Context, args map[string]interface{}) (interface{}, error)
}
```

### API è®¾è®¡

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| NewAgentService | åˆ›å»º Agent æœåŠ¡å®ä¾‹ |
| Execute | æ‰§è¡Œ Agent è¯·æ±‚ |
| RegisterTool | æ³¨å†Œè‡ªå®šä¹‰å·¥å…· |
| StreamExecute | æµå¼æ‰§è¡Œ Agent è¯·æ±‚ |

---

## S014: å·¥å…·æ³¨å†Œæœºåˆ¶

### ä»»åŠ¡

- [ ] å®šä¹‰å·¥å…·æ¥å£
- [ ] å®ç°å†…ç½®å·¥å…·
- [ ] å®ç°è‡ªå®šä¹‰å·¥å…·æ³¨å†Œ

### å†…ç½®å·¥å…·

1. **SendMessage** - å‘é€æ¶ˆæ¯åˆ°å¤©æ¢
2. **GetUser** - è·å–ç”¨æˆ·ä¿¡æ¯
3. **SearchKnowledge** - æœç´¢çŸ¥è¯†åº“

### å·¥å…·å®šä¹‰ç¤ºä¾‹

```go
type ToolDefinition struct {
    Name        string `json:"name"`
    Description string `json:"description"`
    InputSchema schema `json:"input_schema"`
}
```

---

## S015: æ¶ˆæ¯é€šé“é›†æˆ

### ä»»åŠ¡

- [ ] å®ç° Agent è¾“å‡ºåˆ°å¤©æ¢çš„æ¶ˆæ¯å‘é€
- [ ] å®ç°å¤©æ¢æ¶ˆæ¯åˆ° Agent çš„è¾“å…¥è½¬æ¢
- [ ] æ”¯æŒæµå¼è¾“å‡º

### æ¶ˆæ¯æµç¨‹

```
ç”¨æˆ·æ¶ˆæ¯ (å¤©æ¢) â†’ å“ªå’ â†’ Claude Agent SDK
                              â†“
                        å·¥å…·æ‰§è¡Œ
                              â†“
Agent è¾“å‡º â†’ å¤©æ¢ â†’ ç”¨æˆ·æ¶ˆæ¯
```

### å®ç°è¦ç‚¹

1. å°†å¤©æ¢æ¶ˆæ¯æ ¼å¼è½¬æ¢ä¸º Agent è¾“å…¥
2. å°† Agent è¾“å‡ºè½¬æ¢ä¸ºå¤©æ¢æ¶ˆæ¯æ ¼å¼
3. æ”¯æŒæµå¼è¾“å‡ºçš„å®æ—¶æ¨é€

---

## ç›¸å…³æ–‡æ¡£

- [å¤ªç™½ SDK è®¾è®¡](../../docs/implementing/å¤ªç™½SDKè®¾è®¡.md)
- [Claude Agent SDK å®˜æ–¹æ–‡æ¡£](https://docs.anthropic.com/en/docs/claude-agent/overview)
