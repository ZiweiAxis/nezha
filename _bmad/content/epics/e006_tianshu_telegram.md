# E006: å¤©æ¢é›†æˆ Telegram

## æ¦‚è¿°

| å±æ€§ | å€¼ |
|------|-----|
| Epic ID | E006 |
| åç§° | å¤©æ¢ Telegram æ¶ˆæ¯æ¸ é“ |
| æè¿° | è®©å¤©æ¢èƒ½å¤Ÿæ¥æ”¶å’Œå‘é€ Telegram æ¶ˆæ¯ |
| çŠ¶æ€ | ğŸ†• æ–°å»º |
| ä¼˜å…ˆçº§ | P0 |
| ä¾èµ–æ–¹ | - |

## èƒŒæ™¯

ç´«å¾®ç³»ç»Ÿéœ€è¦æ”¯æŒå¤šæ¸ é“æ¶ˆæ¯ï¼š
- **Telegram** æ˜¯é‡è¦çš„æ¶ˆæ¯æ¸ é“ä¹‹ä¸€
- å¤©æ¢éœ€è¦èƒ½å¤Ÿæ¥æ”¶å’Œå‘é€ Telegram æ¶ˆæ¯
- éœ€è¦å®ç°æ¶ˆæ¯æ ¼å¼è½¬æ¢å’Œæ¸ é“é€‚é…

## ç›®æ ‡

1. å®ç° Telegram Bot API å¯¹æ¥
2. æ”¯æŒæ¶ˆæ¯æ¥æ”¶å’Œå‘é€
3. å®ç°æ¶ˆæ¯æ ¼å¼è½¬æ¢
4. æ”¯æŒé¢‘é“å’Œç¾¤ç»„æ¶ˆæ¯

## Stories

| Story | åç§° | æè¿° |
|-------|------|------|
| S016 | Telegram Bot API è°ƒç ” | è°ƒç ” Telegram Bot API åŠŸèƒ½ |
| S017 | Telegram å®¢æˆ·ç«¯å®ç° | å®ç° Telegram æ¶ˆæ¯å®¢æˆ·ç«¯ |
| S018 | æ¶ˆæ¯æ ¼å¼è½¬æ¢ | å®ç°å¤©æ¢æ¶ˆæ¯ä¸ Telegram æ¶ˆæ¯æ ¼å¼è½¬æ¢ |
| S019 | é¢‘é“å’Œç¾¤ç»„æ”¯æŒ | æ”¯æŒ Telegram é¢‘é“å’Œç¾¤ç»„æ¶ˆæ¯ |

---

## éªŒæ”¶æ ‡å‡† (Acceptance Criteria)

- [ ] å¤©æ¢èƒ½å¤Ÿæ¥æ”¶ Telegram æ¶ˆæ¯
- [ ] å¤©æ¢èƒ½å¤Ÿå‘é€ Telegram æ¶ˆæ¯
- [ ] æ”¯æŒç§èŠå’Œç¾¤ç»„æ¶ˆæ¯
- [ ] æ–‡æ¡£å®Œæ•´

## Definition of Done

- [ ] Telegram Bot èƒ½å¤Ÿæ¥æ”¶æ¶ˆæ¯
- [ ] Telegram Bot èƒ½å¤Ÿå‘é€æ¶ˆæ¯
- [ ] æ¶ˆæ¯æ ¼å¼è½¬æ¢æ­£ç¡®
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´ï¼ˆREADME + API æ–‡æ¡£ï¼‰

---

## S016: Telegram Bot API è°ƒç ”

### ä»»åŠ¡

- [ ] è°ƒç ” Telegram Bot API åŠŸèƒ½
- [ ] åˆ†ææ¶ˆæ¯æ¥æ”¶/å‘é€æœºåˆ¶
- [ ] äº†è§£ Webhook å’Œ Long Polling ä¸¤ç§æ–¹å¼
- [ ] ç¼–å†™æŠ€æœ¯è°ƒç ”æŠ¥å‘Š

### è°ƒç ”è¦ç‚¹

1. Telegram Bot API æ ¸å¿ƒç«¯ç‚¹
2. Webhook é…ç½®å’Œä½¿ç”¨
3. æ¶ˆæ¯ç±»å‹æ”¯æŒï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰
4. é¢‘é“å’Œç¾¤ç»„æƒé™

### è¾“å‡º

- æŠ€æœ¯è°ƒç ”æŠ¥å‘Š
- é›†æˆæ–¹æ¡ˆè®¾è®¡æ–‡æ¡£

---

## S017: Telegram å®¢æˆ·ç«¯å®ç°

### ä»»åŠ¡

- [ ] å®ç° Telegram å®¢æˆ·ç«¯åº“
- [ ] æ”¯æŒ Webhook æ¥æ”¶æ¶ˆæ¯
- [ ] æ”¯æŒå‘é€å„ç§ç±»å‹æ¶ˆæ¯

### å®ç°è¦ç‚¹

```go
type TelegramClient struct {
    botToken string
    apiURL   string
    client   *http.Client
}

type MessageHandler func(*TelegramMessage)
```

### å®¢æˆ·ç«¯åŠŸèƒ½

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| NewTelegramClient | åˆ›å»º Telegram å®¢æˆ·ç«¯ |
| SendMessage | å‘é€æ–‡æœ¬æ¶ˆæ¯ |
| SendPhoto | å‘é€å›¾ç‰‡ |
| SendDocument | å‘é€æ–‡ä»¶ |
| SetWebhook | é…ç½® Webhook |
| HandleUpdate | å¤„ç† Webhook æ›´æ–° |

---

## S018: æ¶ˆæ¯æ ¼å¼è½¬æ¢

### ä»»åŠ¡

- [ ] å®ç° Telegram æ¶ˆæ¯åˆ°å¤©æ¢æ¶ˆæ¯çš„è½¬æ¢
- [ ] å®ç°å¤©æ¢æ¶ˆæ¯åˆ° Telegram æ¶ˆæ¯çš„è½¬æ¢
- [ ] æ”¯æŒæ¶ˆæ¯ç±»å‹æ˜ å°„

### æ¶ˆæ¯è½¬æ¢è§„åˆ™

| Telegram | å¤©æ¢ |
|-----------|------|
| text | text |
| photo | image |
| document | file |
| voice | audio |
| sticker | custom |

### å®ç°è¦ç‚¹

1. è§£æ Telegram Update ç»“æ„
2. è½¬æ¢ä¸ºå¤©æ¢ Message æ ¼å¼
3. å¤„ç†é™„ä»¶ä¸‹è½½å’Œä¸Šä¼ 

---

## S019: é¢‘é“å’Œç¾¤ç»„æ”¯æŒ

### ä»»åŠ¡

- [ ] æ”¯æŒé¢‘é“æ¶ˆæ¯æ¥æ”¶
- [ ] æ”¯æŒç¾¤ç»„æ¶ˆæ¯æ¥æ”¶
- [ ] å®ç°æœºå™¨äººå‘½ä»¤å¤„ç†

### åŠŸèƒ½æ¸…å•

1. é¢‘é“æ¶ˆæ¯çš„æ¥æ”¶å’Œå‘é€
2. ç¾¤ç»„æ¶ˆæ¯çš„æ¥æ”¶å’Œå‘é€
3. @æœºå™¨äººå‘½ä»¤å¤„ç†
4. å›è°ƒæŒ‰é’®ï¼ˆCallback Queryï¼‰å¤„ç†

### é…ç½®é¡¹

```yaml
telegram:
  bot_token: "${TELEGRAM_BOT_TOKEN}"
  webhook_url: "https://your-domain.com/webhook/telegram"
  allowed_chats: []
  admin_users: []
```

---

## ç›¸å…³æ–‡æ¡£

- [Telegram Bot API å®˜æ–¹æ–‡æ¡£](https://core.telegram.org/bots/api)
- [å¤ªç™½ SDK è®¾è®¡](../../docs/implementing/å¤ªç™½SDKè®¾è®¡.md)
