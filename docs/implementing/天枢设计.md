# å¤©æ¢è¯¦ç»†è®¾è®¡æ–‡æ¡£

## 1. å®šä½ä¸èŒè´£

**å®šä½**ï¼šå¤©æ¢æ˜¯ç´«å¾®ç³»ç»Ÿçš„**æ¶ˆæ¯ä¸­æ¢**ï¼Œè´Ÿè´£èº«ä»½ç®¡ç†å’Œæ¶ˆæ¯æŠ•é€’ï¼ˆå¯¹æ¥ä¸åŒ IM æ¸ é“ï¼‰ã€‚

> æ³¨ï¼šåœ¨ä¸è°›å¬äº¤äº’æ—¶ï¼Œå¤©æ¢ä½œä¸º PIPï¼ˆç­–ç•¥ä¿¡æ¯ç‚¹ï¼‰æä¾›ç­–ç•¥ä¸Šä¸‹æ–‡ï¼Œä½†è¿™ä¸æ˜¯å¤©æ¢çš„æ ¸å¿ƒèŒè´£ã€‚

**æ ¸å¿ƒèŒè´£**ï¼š
- ç”¨æˆ·èº«ä»½è®¤è¯ä¸æˆæƒä¿¡æ¯ç®¡ç†ï¼ˆAgent æ³¨å†Œã€DID ç®¡ç†ï¼‰
- æ¶ˆæ¯æŠ•é€’ï¼Œå¯¹æ¥ä¸åŒ IM æ¸ é“ (Matrix/é£ä¹¦/Telegram)
- æˆ¿é—´ï¼ˆChannel/ç¾¤ç»„ï¼‰ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ï¼ˆä»…åœ¨éœ€è¦æ—¶ï¼‰æä¾›ç­–ç•¥ä¸Šä¸‹æ–‡ä¿¡æ¯ç»™ç¬è±¸

## 2. æ¶æ„å›¾

```mermaid
flowchart TB
    subgraph å¤©æ¢["æ¶ˆæ¯ä¸­æ¢"]
        direction TB
        API[API Gateway\n:8081]
        Auth[èº«ä»½ç®¡ç†æ¨¡å—]
        Router[æ¶ˆæ¯è·¯ç”±æ¨¡å—]
        Room[æˆ¿é—´ç®¡ç†æ¨¡å—]
        Cache[(ç¼“å­˜å±‚\nRedis)]
        DB[(æ•°æ®åº“\nMySQL)]
    end
    
    subgraph å¤–éƒ¨ç»„ä»¶
        Nezha["å“ªå’ PEP\nç­–ç•¥æ‰§è¡Œç‚¹"]
        Xiezhi["ç¬è±¸ PDP\nç­–ç•¥å†³ç­–ç‚¹"]
        Matrix["Matrix\næ¶ˆæ¯æœåŠ¡å™¨"]
    end
    
    Nezha -->|è¯·æ±‚è·¯ç”±/èº«ä»½éªŒè¯| API
    Xiezhi -->|æŸ¥è¯¢ç­–ç•¥ä¸Šä¸‹æ–‡| API
    API --> Auth
    API --> Router
    API --> Room
    Auth --> Cache
    Auth --> DB
    Router --> Matrix
    Room --> DB
```

## 3. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½æè¿° | å…³é”®æ¥å£ |
|------|----------|----------|
| **èº«ä»½ç®¡ç†** | ç”¨æˆ·æ³¨å†Œã€è®¤è¯ã€æƒé™æ˜ å°„ | `getUserInfo`, `validateToken`, `getUserRoles` |
| **æ¶ˆæ¯ç½‘å…³** | æ¶ˆæ¯åˆ†å‘åˆ°ä¸åŒ IM æ¸ é“ (Matrix/é£ä¹¦/Telegram) | `routeMessage`, `resolveTarget`, `forwardMessage` |
| **æˆ¿é—´ç®¡ç†** | æˆ¿é—´åˆ›å»ºã€æˆå‘˜ç®¡ç†ã€æƒé™åŒæ­¥ | `createRoom`, `joinRoom`, `getRoomMembers`, `leaveRoom` |
| **ç­–ç•¥ä¸Šä¸‹æ–‡** | ä¸ºPDPæä¾›å†³ç­–æ‰€éœ€ä¸Šä¸‹æ–‡ä¿¡æ¯ | `getPolicyContext`, `queryUserPermissions` |

## 4. å·¥ä½œæµç¨‹æ—¶åºå›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant W as å“ªå’ PEP
    participant T as ç¬è±¸ PDP
    participant X as å¤©æ¢ PIP
    participant M as Matrix
    
    U->>W: å‘é€æ¶ˆæ¯
    W->>T: è¯·æ±‚ç­–ç•¥å†³ç­–
    T->>X: æŸ¥è¯¢ç”¨æˆ·èº«ä»½/æƒé™
    X->>X: éªŒè¯token
    X->>X: è·å–ç”¨æˆ·è§’è‰²
    X-->>T: è¿”å›æƒé™ä¸Šä¸‹æ–‡
    T-->>W: å†³ç­–ç»“æœ: å…è®¸/æ‹’ç»
    
    alt å…è®¸æ‰§è¡Œ
        W->>X: è·å–è·¯ç”±ä¿¡æ¯
        X-->>W: è¿”å›ç›®æ ‡æˆ¿é—´/ç”¨æˆ·
        W->>M: è½¬å‘æ¶ˆæ¯
    else æ‹’ç»æ‰§è¡Œ
        W-->>U: è¿”å›æ‹’ç»åŸå› 
    end
```

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant X as å¤©æ¢ PIP
    participant M as Matrix
    
    Note over U,X: æˆ¿é—´ç®¡ç†æµç¨‹
    U->>X: åˆ›å»ºæˆ¿é—´è¯·æ±‚
    X->>M: åˆ›å»ºMatrixæˆ¿é—´
    M-->>X: æˆ¿é—´ID
    X->>X: å­˜å‚¨æˆ¿é—´æ˜ å°„
    X-->>U: è¿”å›æˆ¿é—´ä¿¡æ¯
    
    U->>X: åŠ å…¥æˆ¿é—´è¯·æ±‚
    X->>M: åŠ å…¥æˆ¿é—´
    M-->>X: ç¡®è®¤åŠ å…¥
    X-->>U: è¿”å›æˆåŠŸ
```

## 5. æ¥å£è®¾è®¡

### èº«ä»½ç®¡ç†

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·å–ç”¨æˆ·ä¿¡æ¯ | GET | `/api/v1/users/{userId}` | æŸ¥è¯¢ç”¨æˆ·åŸºç¡€ä¿¡æ¯ |
| éªŒè¯Token | POST | `/api/v1/auth/validate` | éªŒè¯è®¿é—®ä»¤ç‰Œæœ‰æ•ˆæ€§ |
| è·å–ç”¨æˆ·è§’è‰² | GET | `/api/v1/users/{userId}/roles` | è·å–ç”¨æˆ·æ‰€æœ‰è§’è‰² |

### æ¶ˆæ¯è·¯ç”±

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·¯ç”±æ¶ˆæ¯ | POST | `/api/v1/route` | è·å–æ¶ˆæ¯è·¯ç”±ç›®æ ‡ |
| è§£æç›®æ ‡ | POST | `/api/v1/route/resolve` | è§£æç”¨æˆ·å/æˆ¿é—´åä¸ºMatrix ID |
| è½¬å‘æ¶ˆæ¯ | POST | `/api/v1/message/forward` | æ‰§è¡Œæ¶ˆæ¯è½¬å‘ |

### æˆ¿é—´ç®¡ç†

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ›å»ºæˆ¿é—´ | POST | `/api/v1/rooms` | åˆ›å»ºæ–°æˆ¿é—´ |
| åŠ å…¥æˆ¿é—´ | POST | `/api/v1/rooms/{roomId}/join` | ç”¨æˆ·åŠ å…¥æˆ¿é—´ |
| ç¦»å¼€æˆ¿é—´ | POST | `/api/v1/rooms/{roomId}/leave` | ç”¨æˆ·ç¦»å¼€æˆ¿é—´ |
| è·å–æˆå‘˜ | GET | `/api/v1/rooms/{roomId}/members` | è·å–æˆ¿é—´æˆå‘˜åˆ—è¡¨ |

### ç­–ç•¥ä¸Šä¸‹æ–‡

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·å–ç­–ç•¥ä¸Šä¸‹æ–‡ | GET | `/api/v1/policy/context` | ä¸ºPDPæä¾›å†³ç­–ä¸Šä¸‹æ–‡ |
| æŸ¥è¯¢æƒé™ | GET | `/api/v1/permissions/{userId}` | æŸ¥è¯¢ç”¨æˆ·æƒé™åˆ—è¡¨ |

## 6. å¤šæ¶ˆæ¯æ¸ é“æ¶æ„

å¤©æ¢æ”¯æŒå¤šæ¶ˆæ¯æ¸ é“æ¥å…¥ï¼Œé€šè¿‡ç»Ÿä¸€çš„é€‚é…å™¨æ¨¡å¼å¯¹æ¥ä¸åŒçš„å³æ—¶é€šè®¯å¹³å°ã€‚

### 6.1 æ¶æ„æ¦‚è¿°

```mermaid
flowchart TB
    subgraph æ¸ é“å±‚
        Matrix["Matrix é€‚é…å™¨"]
        Feishu["é£ä¹¦é€‚é…å™¨"]
        Telegram["Telegram é€‚é…å™¨"]
        Discord["Discord é€‚é…å™¨"]
    end
    
    subgraph åè®®è½¬æ¢å±‚
        Normalizer["æ¶ˆæ¯æ ‡å‡†åŒ–å™¨"]
        Formatter["æ ¼å¼è½¬æ¢å™¨"]
    end
    
    subgraph æ ¸å¿ƒå±‚
        Router["æ¶ˆæ¯è·¯ç”±"]
        Handler["äº‹ä»¶å¤„ç†"]
        Callback["å›è°ƒç®¡ç†"]
    end
    
    subgraph å­˜å‚¨å±‚
        Redis[(Redis)]
        MySQL[(MySQL)]
    end
    
    Matrix --> Normalizer
    Feishu --> Normalizer
    Telegram --> Normalizer
    Discord --> Normalizer
    
    Normalizer --> Router
    Normalizer --> Handler
    
    Router --> Formatter
    Handler --> Callback
    
    Redis --> Router
    MySQL --> Handler
```

### 6.2 æ¸ é“é€‚é…å™¨

| é€‚é…å™¨ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| **Matrix** | âœ… å·²æ”¯æŒ | æ ¸å¿ƒæ¶ˆæ¯æœåŠ¡å™¨ï¼ŒåŸºäº Synapse |
| **é£ä¹¦** | ğŸ”„ å¼€å‘ä¸­ | æ”¯æŒä¼ä¸šå†…éƒ¨ç¾¤ã€å•èŠã€å¡ç‰‡æ¶ˆæ¯ |
| **Telegram** | ğŸ”„ å¼€å‘ä¸­ | æ”¯æŒæœºå™¨äººAPIã€é¢‘é“ã€ç¾¤ç»„ |
| **Discord** | ğŸ“ è§„åˆ’ä¸­ | æ”¯æŒæœåŠ¡å™¨ã€é¢‘é“ã€Webhook |

### 6.3 é€‚é…å™¨æ¥å£å®šä¹‰

```typescript
interface ChannelAdapter {
    // å‘é€æ¶ˆæ¯
    sendMessage(target: string, message: Message): Promise<MessageResult>;
    
    // å‘é€å¡ç‰‡æ¶ˆæ¯
    sendCard(target: string, card: CardMessage): Promise<MessageResult>;
    
    // å¤„ç†å›è°ƒäº‹ä»¶
    handleCallback(event: CallbackEvent): Promise<CallbackResult>;
    
    // è·å–ç”¨æˆ·ä¿¡æ¯
    getUserInfo(userId: string): Promise<UserInfo>;
    
    // æ¶ˆæ¯æ ¼å¼åŒ–
    formatMessage(message: Message): any;
}
```

## 7. æ¶ˆæ¯åè®®è½¬æ¢

### 7.1 å¤ªç™½æ¶ˆæ¯åè®®

å¤ªç™½æ˜¯ç´«å¾®ç³»ç»Ÿçš„æ¶ˆæ¯å¤„ç†ä¸­å¿ƒï¼Œä½¿ç”¨ç»Ÿä¸€çš„æ¶ˆæ¯åè®®ï¼š

```typescript
interface TaibaiMessage {
    // æ¶ˆæ¯å”¯ä¸€ID
    messageId: string;
    
    // å‘é€è€…ä¿¡æ¯
    sender: {
        userId: string;
        username: string;
        platform: string;
    };
    
    // æ¥æ”¶è€…ä¿¡æ¯
    recipient: {
        type: 'user' | 'room' | 'channel';
        id: string;
    };
    
    // æ¶ˆæ¯å†…å®¹
    content: {
        type: 'text' | 'image' | 'file' | 'card' | 'markdown';
        body: string;
        extra?: Record<string, any>;
    };
    
    // æ¶ˆæ¯å…ƒæ•°æ®
    metadata: {
        timestamp: number;
        threadId?: string;
        replyTo?: string;
    };
    
    // å›è°ƒä¿¡æ¯ï¼ˆç”¨äºå¡ç‰‡æŒ‰é’®ï¼‰
    callback?: {
        callbackId: string;
        action: string;
        data: Record<string, any>;
    };
}
```

### 7.2 æ¸ é“æ¶ˆæ¯æ ¼å¼è½¬æ¢

```mermaid
flowchart LR
    subgraph å¤ªç™½åè®®
        TB["TaibaiMessage\nJSON"]
    end
    
    subgraph è½¬æ¢å±‚
        Conv["æ¶ˆæ¯è½¬æ¢å™¨"]
    end
    
    subgraph æ¸ é“æ ¼å¼
        MX["Matrix\norg.matrix.custom"]
        FS["é£ä¹¦\ninteractive.card"]
        TG["Telegram\nMarkdown/HTML"]
        DC["Discord\nEmbed"]
    end
    
    TB --> Conv
    Conv -->|Matrix| MX
    Conv -->|é£ä¹¦| FS
    Conv -->|Telegram| TG
    Conv -->|Discord| DC
```

### 7.3 æ ¼å¼è½¬æ¢æ˜ å°„

| å†…å®¹ç±»å‹ | Matrix | é£ä¹¦ | Telegram | Discord |
|----------|--------|------|----------|---------|
| æ–‡æœ¬ | `org.matrix.custom.html` | `text` | Markdown | Embed description |
| å›¾ç‰‡ | `m.image` | `image` | `photo` | Embed image |
| å¡ç‰‡ | `org.matrix.custom.card` | `interactive.card` | Inline keyboard | Action row |
| Markdown | HTML è½¬æ¢ | å¯Œæ–‡æœ¬ | HTML | Markdown |

## 8. æ¶ˆæ¯å›å¤é€»è¾‘

### 8.1 å¡ç‰‡æŒ‰é’®ç‚¹å‡»å¤„ç†

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant X as å¤©æ¢
    participant T as ç¬è±¸ PDP
    participant M as æ¶ˆæ¯æ¸ é“
    
    Note over U,M: ç”¨æˆ·ç‚¹å‡»å¡ç‰‡æŒ‰é’®
    M->>X: å›è°ƒäº‹ä»¶ (callback_id, action, data)
    X->>X: è§£æå›è°ƒID
    X->>T: æŸ¥è¯¢å›è°ƒå¯¹åº”çš„ç­–ç•¥
    T-->>X: è¿”å›å¤„ç†åŠ¨ä½œ
    X->>X: æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    X->>M: å‘é€å›å¤æ¶ˆæ¯
    M-->>U: å±•ç¤ºç»“æœ
```

### 8.2 ç”¨æˆ·å›å¤å¤„ç†æµç¨‹

```mermaid
flowchart TB
    subgraph æ¥æ”¶å±‚
        R["æ¥æ”¶ç”¨æˆ·å›å¤"]
        V["éªŒè¯æ¶ˆæ¯æœ‰æ•ˆæ€§"]
    end
    
    subgraph å¤„ç†å±‚
        P["è§£æå›å¤å†…å®¹"]
        C["æŸ¥æ‰¾å…³è”ä¸Šä¸‹æ–‡"]
        A["æ‰§è¡Œä¸šåŠ¡é€»è¾‘"]
    end
    
    subgraph å“åº”å±‚
        F["æ ¼å¼åŒ–å“åº”"]
        S["å‘é€å“åº”æ¶ˆæ¯"]
        U["æ›´æ–°çŠ¶æ€"]
    end
    
    R --> V
    V -->|æœ‰æ•ˆ| P
    V -->|æ— æ•ˆ| S
    P --> C
    C --> A
    A --> F
    F --> S
    S --> U
```

### 8.3 å›è°ƒè·¯ç”±æœºåˆ¶

```typescript
interface CallbackRouter {
    // æ³¨å†Œå›è°ƒå¤„ç†å‡½æ•°
    register(callbackId: string, handler: CallbackHandler): void;
    
    // è·¯ç”±å›è°ƒäº‹ä»¶
    route(event: CallbackEvent): Promise<HandleResult>;
    
    // å›è°ƒè¶…æ—¶å¤„ç†
    handleTimeout(callbackId: string, data: any): void;
}

interface CallbackHandler {
    // éªŒè¯å›è°ƒæƒé™
    validate(event: CallbackEvent): Promise<boolean>;
    
    // æ‰§è¡Œå›è°ƒå¤„ç†
    handle(event: CallbackEvent): Promise<HandleResult>;
    
    // ç”Ÿæˆå“åº”æ¶ˆæ¯
    respond(result: HandleResult): Message;
}
```

### 8.4 å›è°ƒè¶…æ—¶é…ç½®

| åœºæ™¯ | è¶…æ—¶æ—¶é—´ | å¤„ç†ç­–ç•¥ |
|------|----------|----------|
| å¡ç‰‡æŒ‰é’®ç‚¹å‡» | 30ç§’ | æç¤ºç”¨æˆ·æ“ä½œè¶…æ—¶ |
| æ¶ˆæ¯å›å¤ | 5åˆ†é’Ÿ | é‡Šæ”¾å…³è”ä¸Šä¸‹æ–‡ |
| èœå•é€‰æ‹© | 60ç§’ | æç¤ºè¯·é‡æ–°é€‰æ‹© |

## 9. æ¶ˆæ¯å‘é€æµç¨‹æ—¶åºå›¾

### 9.1 å®Œæ•´å‘é€æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant W as å“ªå’ PEP
    participant T as ç¬è±¸ PDP
    participant X as å¤©æ¢
    participant C as æ¸ é“é€‚é…å™¨
    participant M as æ¶ˆæ¯å¹³å°
    
    U->>W: å‘é€æ¶ˆæ¯
    W->>T: è¯·æ±‚ç­–ç•¥å†³ç­–
    T->>X: æŸ¥è¯¢ç­–ç•¥ä¸Šä¸‹æ–‡
    X-->>T: è¿”å›ä¸Šä¸‹æ–‡ä¿¡æ¯
    T-->>W: å†³ç­–ç»“æœ
    
    alt å…è®¸å‘é€
        W->>X: è¯·æ±‚è·¯ç”±
        X->>X: è§£æç›®æ ‡æ¸ é“
        X->>C: è½¬æ¢æ¶ˆæ¯æ ¼å¼
        C->>M: å‘é€æ¶ˆæ¯
        M-->>C: å‘é€ç»“æœ
        C-->>X: è¿”å›ç»“æœ
        X-->>W: ç¡®è®¤å‘é€
        W-->>U: æ¶ˆæ¯å·²å‘é€
    else æ‹’ç»å‘é€
        W-->>U: æ‹’ç»åŸå› 
    end
```

### 9.2 å¡ç‰‡æ¶ˆæ¯å‘é€æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant X as å¤©æ¢
    participant C as æ¸ é“é€‚é…å™¨
    participant M as æ¶ˆæ¯å¹³å°
    
    U->>X: è¯·æ±‚å‘é€å¡ç‰‡æ¶ˆæ¯
    X->>X: æ„å»ºå¡ç‰‡ç»“æ„
    X->>X: ç”Ÿæˆ callback_id
    X->>X: æ³¨å†Œå›è°ƒå¤„ç†
    X->>C: è½¬æ¢å¡ç‰‡æ ¼å¼
    C->>M: å‘é€å¡ç‰‡æ¶ˆæ¯
    M-->>C: æ¶ˆæ¯ID
    C-->>X: è¿”å›å‘é€ç»“æœ
    X-->>U: å¡ç‰‡å·²å‘é€
    
    Note over U,M: ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
    M->>C: å›è°ƒäº‹ä»¶
    C->>X: è½¬å‘å›è°ƒ
    X->>X: æŸ¥æ‰¾å¤„ç†å‡½æ•°
    X->>X: æ‰§è¡Œå¤„ç†
    X-->>C: å“åº”å†…å®¹
    C->>M: æ›´æ–°æ¶ˆæ¯/å‘é€æ–°æ¶ˆæ¯
```

---

## 10. WebSocket æ¥å£

### 10.1 è¿æ¥ç«¯ç‚¹

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `/ws/stream` | å®æ—¶æ¶ˆæ¯æ¨é€ |
| `/ws/events` | äº‹ä»¶æ¨é€ï¼ˆå¡ç‰‡å›è°ƒã€çŠ¶æ€å˜æ›´ï¼‰ |

### 10.2 æ¶ˆæ¯æ ¼å¼

```json
{
    "type": "message",
    "payload": {
        "messageId": "msg-xxx",
        "content": {}
    }
}
```

### 10.3 å¿ƒè·³

- å®¢æˆ·ç«¯æ¯ 30 ç§’å‘é€ ping
- æœåŠ¡ç«¯å“åº” pong
- è¶…è¿‡ 60 ç§’æ— æ´»åŠ¨æ–­å¼€è¿æ¥

---

## 11. é”™è¯¯ç å®šä¹‰

### 11.1 é€šç”¨é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | è®¤è¯å¤±è´¥ |
| 403 | æƒé™ä¸è¶³ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ |
| 500 | æœåŠ¡ç«¯é”™è¯¯ |
| 503 | æœåŠ¡ä¸å¯ç”¨ |

### 11.2 ä¸šåŠ¡é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 1001 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 1002 | æˆ¿é—´ä¸å­˜åœ¨ |
| 1003 | æ¶ˆæ¯å‘é€å¤±è´¥ |
| 1004 | å›è°ƒè¶…æ—¶ |
| 1005 | IM æ¸ é“ä¸å¯ç”¨ |

---

## 12. SDK é…ç½®

### 12.1 æœåŠ¡åœ°å€é…ç½®

```yaml
tianshu:
  host: localhost
  port: 8081
  ws_port: 8082
  timeout: 30s
```

### 12.2 è®¤è¯é…ç½®

```yaml
auth:
  type: bearer
  token: "your-token-here"
  refresh_enabled: true
```

---

## 13. ä¸å¤ªç™½ SDK å¯¹ç…§

| åŠŸèƒ½ | å¤©æ¢æœåŠ¡ç«¯ | å¤ªç™½ SDK |
|------|-----------|----------|
| æ¶ˆæ¯å‘é€ | POST /api/v1/message/forward | SendMessage() |
| ç”¨æˆ·æŸ¥è¯¢ | GET /api/v1/users/{id} | GetUser() |
| æˆ¿é—´ç®¡ç† | POST /api/v1/rooms | CreateRoom() |
| WebSocket | /ws/stream | Subscribe() |
| é”™è¯¯ç  | é€šç”¨ + ä¸šåŠ¡ç  | ErrAuthFailed ç­‰ |
