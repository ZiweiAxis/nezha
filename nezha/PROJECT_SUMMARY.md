# æ‚Ÿç©º (Wukong) - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æ‚Ÿç©ºæ˜¯ç´«å¾®æ™ºèƒ½ä½“æ²»ç†å¹³å°çš„ Agent ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œç›‘æ§å„ç±» AI Agentï¼ˆå¦‚ Claudeã€Cursor ç­‰ï¼‰çš„è¿è¡ŒçŠ¶æ€ã€‚

## å·²å®ŒæˆåŠŸèƒ½

### âœ… æ ¸å¿ƒæ¶æ„

- **æ¥å£å±‚** - å®šä¹‰äº† 5 ä¸ªæ ¸å¿ƒæ¥å£ï¼š
  - `IAgentAdapter` - Agent é€‚é…å™¨æ¥å£
  - `IAgentManager` - Agent ç®¡ç†å™¨æ¥å£
  - `IIdentityManager` - èº«ä»½ç®¡ç†å™¨æ¥å£
  - `IStateManager` - çŠ¶æ€ç®¡ç†å™¨æ¥å£
  - `ITianshuClient` - å¤©æ¢å®¢æˆ·ç«¯æ¥å£

- **ç®¡ç†å™¨å±‚** - å®ç°äº† 3 ä¸ªæ ¸å¿ƒç®¡ç†å™¨ï¼š
  - `AgentManager` - è´Ÿè´£ Agent çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯
  - `IdentityManager` - è´Ÿè´£ Agent èº«ä»½æ³¨å†Œå’Œç®¡ç†
  - `StateManager` - è´Ÿè´£çŠ¶æ€åŒæ­¥å’Œå¿ƒè·³

- **é€‚é…å™¨å±‚** - å®ç°äº† Claude é€‚é…å™¨ï¼š
  - `ClaudeAdapter` - æ”¯æŒæœ¬åœ°ã€Dockerã€gVisor ä¸‰ç§è¿è¡Œæ¨¡å¼

- **å®¢æˆ·ç«¯å±‚** - å®ç°äº†å¤©æ¢å®¢æˆ·ç«¯ï¼š
  - `TianshuClient` - ä¸å¤©æ¢ API é€šä¿¡

### âœ… CLI å·¥å…·

å®Œæ•´çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒä»¥ä¸‹å‘½ä»¤ï¼š

```bash
wukong claude          # å¯åŠ¨ Claude Agent
wukong list            # åˆ—å‡ºæ‰€æœ‰ Agent
wukong status <name>   # æŸ¥çœ‹ Agent çŠ¶æ€
wukong stop <name>     # åœæ­¢ Agent
wukong restart <name>  # é‡å¯ Agent
wukong logs <name>     # æŸ¥çœ‹ Agent æ—¥å¿—
wukong identity        # ç®¡ç†èº«ä»½
```

### âœ… ç±»å‹ç³»ç»Ÿ

å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼š
- Agent é…ç½®å’Œå®ä¾‹ç±»å‹
- èº«ä»½å’ŒçŠ¶æ€ç±»å‹
- è¿è¡Œæ¨¡å¼å’ŒçŠ¶æ€æšä¸¾
- è¯·æ±‚å’Œå“åº”ç±»å‹

### âœ… æµ‹è¯•æ¡†æ¶

- ä½¿ç”¨ Vitest ä½œä¸ºæµ‹è¯•æ¡†æ¶
- å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
- æµ‹è¯•è„šæœ¬ç”¨äº CLI éªŒè¯

### âœ… æ–‡æ¡£

- `README.md` - é¡¹ç›®ä»‹ç»å’Œå¿«é€Ÿå¼€å§‹
- `USAGE.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- `DEVELOPMENT.md` - å¼€å‘è€…æŒ‡å—
- `ROADMAP.md` - åŠŸèƒ½è·¯çº¿å›¾

## é¡¹ç›®ç»“æ„

```
wukong/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ adapters/          # Agent é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ ClaudeAdapter.ts
â”‚   â”œâ”€â”€ clients/           # å¤–éƒ¨å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ TianshuClient.ts
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¥å£
â”‚   â”‚   â”œâ”€â”€ IAgentAdapter.ts
â”‚   â”‚   â”œâ”€â”€ IAgentManager.ts
â”‚   â”‚   â”œâ”€â”€ IIdentityManager.ts
â”‚   â”‚   â”œâ”€â”€ IStateManager.ts
â”‚   â”‚   â””â”€â”€ ITianshuClient.ts
â”‚   â”œâ”€â”€ managers/          # ç®¡ç†å™¨å®ç°
â”‚   â”‚   â”œâ”€â”€ AgentManager.ts
â”‚   â”‚   â”œâ”€â”€ IdentityManager.ts
â”‚   â”‚   â””â”€â”€ StateManager.ts
â”‚   â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ cli.ts             # CLI å…¥å£
â”‚   â””â”€â”€ index.ts           # ä¸»å…¥å£
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ unit/              # å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ AgentManager.test.ts
â”‚       â””â”€â”€ IdentityManager.test.ts
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ USAGE.md
â”‚   â””â”€â”€ DEVELOPMENT.md
â”œâ”€â”€ examples/              # ç¤ºä¾‹é…ç½®
â”‚   â””â”€â”€ agent-config.json
â”œâ”€â”€ scripts/               # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ test-cli.sh
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vitest.config.ts
â””â”€â”€ README.md
```

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript 5.x
- **è¿è¡Œæ—¶**: Node.js 18+
- **CLI æ¡†æ¶**: Commander.js
- **æµ‹è¯•æ¡†æ¶**: Vitest
- **æ„å»ºå·¥å…·**: TypeScript Compiler

## æ ¸å¿ƒç‰¹æ€§

### 1. å¤šè¿è¡Œæ¨¡å¼æ”¯æŒ

- **Local** - æœ¬åœ°ç›´æ¥è¿è¡Œï¼Œæ— éš”ç¦»
- **Sandbox** - Docker å®¹å™¨éš”ç¦»
- **Deep Sandbox** - gVisor æ·±åº¦éš”ç¦»

### 2. èº«ä»½ç®¡ç†

- å‘å¤©æ¢æ³¨å†Œ Agent èº«ä»½
- æ”¯æŒåˆ†çº§å®¡æ‰¹ï¼ˆä½/ä¸­/é«˜é£é™©ï¼‰
- èº«ä»½çŠ¶æ€è·Ÿè¸ª

### 3. çŠ¶æ€åŒæ­¥

- å®æ—¶å¿ƒè·³æœºåˆ¶
- çŠ¶æ€å˜æ›´é€šçŸ¥
- è‡ªåŠ¨é‡è¿

### 4. é€‚é…å™¨ç³»ç»Ÿ

- æ’ä»¶åŒ–æ¶æ„
- æ˜“äºæ‰©å±•æ–° Agent ç±»å‹
- ç»Ÿä¸€çš„æ¥å£è§„èŒƒ

### 5. é›¶ä¾µå…¥æ²»ç†

- é€šè¿‡ diting-hook è‡ªåŠ¨æ¥å…¥
- æ— éœ€ä¿®æ”¹ Agent ä»£ç 
- é€æ˜çš„æ²»ç†å±‚

## æµ‹è¯•ç»“æœ

```
âœ“ tests/unit/AgentManager.test.ts  (3 tests | 1 skipped)
âœ“ tests/unit/IdentityManager.test.ts  (6 tests)

Test Files  2 passed (2)
Tests       8 passed | 1 skipped (9)
```

## å¾…å®ŒæˆåŠŸèƒ½

### é«˜ä¼˜å…ˆçº§

1. **Docker æ²™ç®±å®ç°** - å®Œæˆ `startSandbox` æ–¹æ³•
2. **gVisor æ·±åº¦æ²™ç®±å®ç°** - å®Œæˆ `startDeepSandbox` æ–¹æ³•
3. **diting-hook é…ç½®** - å®ç° `configureDitingHook` æ–¹æ³•
4. **çœŸå®å¤©æ¢ API é›†æˆ** - æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®
5. **æ—¥å¿—ç³»ç»Ÿ** - å®ç°å®Œæ•´çš„æ—¥å¿—æ”¶é›†å’ŒæŸ¥è¯¢

### ä¸­ä¼˜å…ˆçº§

6. **è‡ªåŠ¨é‡å¯ç­–ç•¥** - å®ç°æ™ºèƒ½é‡å¯é€»è¾‘
7. **å¥åº·æ£€æŸ¥** - å®šæœŸæ£€æŸ¥ Agent å¥åº·çŠ¶æ€
8. **èµ„æºç›‘æ§** - CPUã€å†…å­˜ã€ç½‘ç»œä½¿ç”¨ç›‘æ§
9. **é…ç½®æ–‡ä»¶æ”¯æŒ** - æ”¯æŒä»æ–‡ä»¶åŠ è½½é…ç½®
10. **æ›´å¤šé€‚é…å™¨** - Cursorã€Windsurf ç­‰

### ä½ä¼˜å…ˆçº§

11. **Web UI** - å¯è§†åŒ–ç®¡ç†ç•Œé¢
12. **æŒ‡æ ‡å¯¼å‡º** - Prometheus é›†æˆ
13. **å‘Šè­¦ç³»ç»Ÿ** - å¼‚å¸¸æƒ…å†µå‘Šè­¦
14. **æ‰¹é‡æ“ä½œ** - æ‰¹é‡å¯åŠ¨/åœæ­¢ Agent
15. **å¤‡ä»½æ¢å¤** - çŠ¶æ€æ•°æ®å¤‡ä»½

## ä½¿ç”¨ç¤ºä¾‹

### å¯åŠ¨ Claude Agent

```bash
# æœ¬åœ°æ¨¡å¼
wukong claude --name my-claude --mode local

# Docker æ²™ç®±
wukong claude --name my-claude --mode sandbox

# æŸ¥çœ‹çŠ¶æ€
wukong status my-claude

# æŸ¥çœ‹æ—¥å¿—
wukong logs my-claude
```

### ç®¡ç†èº«ä»½

```bash
# æ³¨å†Œèº«ä»½
wukong identity --register my-agent --type claude

# åˆ—å‡ºèº«ä»½
wukong identity --list
```

## æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**: < 2 ç§’ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰
- **å†…å­˜å ç”¨**: ~50MBï¼ˆåŸºç¡€è¿è¡Œï¼‰
- **CPU ä½¿ç”¨**: < 1%ï¼ˆç©ºé—²çŠ¶æ€ï¼‰

## å®‰å…¨è€ƒè™‘

- èº«ä»½éªŒè¯é€šè¿‡å¤©æ¢ API Key
- æ²™ç®±æ¨¡å¼æä¾›è¿›ç¨‹éš”ç¦»
- gVisor æä¾›å†…æ ¸çº§éš”ç¦»
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨

## æ‰©å±•æ€§

- æ’ä»¶åŒ–é€‚é…å™¨ç³»ç»Ÿ
- æ ‡å‡†åŒ–æ¥å£å®šä¹‰
- æ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- æ”¯æŒè‡ªå®šä¹‰é’©å­

## éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ
- ä½¿ç”¨ Local æ¨¡å¼
- å¯ç”¨è¯¦ç»†æ—¥å¿—
- å¿«é€Ÿè¿­ä»£æµ‹è¯•

### æµ‹è¯•ç¯å¢ƒ
- ä½¿ç”¨ Sandbox æ¨¡å¼
- æ¨¡æ‹Ÿç”Ÿäº§é…ç½®
- å®Œæ•´åŠŸèƒ½æµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒ
- ä½¿ç”¨ Deep Sandbox æ¨¡å¼
- å¯ç”¨ç›‘æ§å’Œå‘Šè­¦
- å®šæœŸå¤‡ä»½çŠ¶æ€

## è´¡çŒ®è€…

- åˆå§‹å¼€å‘ï¼šClaude (AI Assistant)
- æ¶æ„è®¾è®¡ï¼šåŸºäºç´«å¾®å¹³å°è§„èŒƒ

## è®¸å¯è¯

MIT License

## ä¸‹ä¸€æ­¥è®¡åˆ’

1. å®Œæˆ Docker å’Œ gVisor æ²™ç®±å®ç°
2. é›†æˆçœŸå®çš„å¤©æ¢ API
3. å®ç°å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ
4. æ·»åŠ æ›´å¤š Agent é€‚é…å™¨
5. å¼€å‘ Web ç®¡ç†ç•Œé¢

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼š[GitHub Repository]
- é—®é¢˜åé¦ˆï¼š[Issue Tracker]
- æ–‡æ¡£ç«™ç‚¹ï¼š[Documentation Site]

---

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ Alpha ç‰ˆæœ¬ (v0.1.0)

**æœ€åæ›´æ–°**: 2024-02-16
